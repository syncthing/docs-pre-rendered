

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2.10. Firewall Setup &mdash; Syncthing v1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.png"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/syncthing.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Syncthing v1 documentation" href="../index.html"/>
        <link rel="up" title="2. Usage" href="index.html"/>
        <link rel="next" title="2.11. Relaying" href="relaying.html"/>
        <link rel="prev" title="2.9. Understanding Synchronization" href="syncing.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Syncthing
          

          
          </a>

          
            
            
              <div class="version">
                v1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro/index.html">1. Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">2. Usage</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="syncthing.html">2.1. Command Line Operation</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html">2.2. FAQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="releases.html">2.3. Release Channels</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html">2.4. Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced.html">2.5. Advanced Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="foldertypes.html">2.6. Folder Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="introducer.html">2.7. Introducer Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="guilisten.html">2.8. The GUI Listen Address</a></li>
<li class="toctree-l2"><a class="reference internal" href="syncing.html">2.9. Understanding Synchronization</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">2.10. Firewall Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#port-forwards">2.10.1. Port Forwards</a></li>
<li class="toctree-l3"><a class="reference internal" href="#local-firewall">2.10.2. Local Firewall</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#uncomplicated-firewall-ufw">Uncomplicated Firewall (ufw)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#remote-web-gui">2.10.3. Remote Web GUI</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#tunneling-via-ssh">Tunneling via SSH</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#via-a-proxy">2.10.4. Via a Proxy</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="relaying.html">2.11. Relaying</a></li>
<li class="toctree-l2"><a class="reference internal" href="proxying.html">2.12. Using Proxies</a></li>
<li class="toctree-l2"><a class="reference internal" href="ignoring.html">2.13. Ignoring Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="versioning.html">2.14. File Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="stdiscosrv.html">2.15. Syncthing Discovery Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="strelaysrv.html">2.16. Syncthing Relay Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="custom-upgrades.html">2.17. Custom Upgrade Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="autostart.html">2.18. Starting Syncthing Automatically</a></li>
<li class="toctree-l2"><a class="reference internal" href="contrib.html">2.19. Community Contributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="profiling.html">2.20. Profiling</a></li>
<li class="toctree-l2"><a class="reference internal" href="reverseproxy.html">2.21. Reverse Proxy Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="security.html">2.22. Security Principles</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev/index.html">3. Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../specs/index.html">4. Specifications</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Syncthing</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html"><span class="section-number">2. </span>Usage</a> &raquo;</li>
        
      <li><span class="section-number">2.10. </span>Firewall Setup</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/syncthing/docs/blob/master/users/firewall.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="firewall-setup">
<span id="id1"></span><h1><span class="section-number">2.10. </span>Firewall Setup<a class="headerlink" href="#firewall-setup" title="Permalink to this headline">¶</a></h1>
<section id="port-forwards">
<h2><span class="section-number">2.10.1. </span>Port Forwards<a class="headerlink" href="#port-forwards" title="Permalink to this headline">¶</a></h2>
<p>If you have a NAT router which supports UPnP, the easiest way to get a working
port forward is to make sure UPnP setting is enabled on both Syncthing and the
router – Syncthing will try to handle the rest. If it succeeds you will see a
message in the console saying:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Created</span> <span class="n">UPnP</span> <span class="n">port</span> <span class="n">mapping</span> <span class="k">for</span> <span class="n">external</span> <span class="n">port</span> <span class="n">XXXXX</span> <span class="n">on</span> <span class="n">UPnP</span> <span class="n">device</span> <span class="n">YYYYY</span><span class="o">.</span>
</pre></div>
</div>
<p>If this is not possible or desirable you should set up a port forward for port
<strong>22000/TCP</strong>, or the port set in the <em>Sync Protocol Listen Address</em> setting.
The external forwarded port and the internal destination port has to be the same
(i.e. 22000/TCP).</p>
<p>Communication in Syncthing works both ways. Therefore if you set up port
forwards for one device, other devices will be able to connect to it even when
they are behind a NAT network or firewall.</p>
<p>In the absence of port forwarding, <a class="reference internal" href="relaying.html#relaying"><span class="std std-ref">Relaying</span></a> may work well enough to get
devices connected and synced, but will perform poorly in comparison to a
direct connection.</p>
</section>
<section id="local-firewall">
<h2><span class="section-number">2.10.2. </span>Local Firewall<a class="headerlink" href="#local-firewall" title="Permalink to this headline">¶</a></h2>
<p>If your PC has a local firewall, you will need to open the following ports for
incoming and outgoing traffic:</p>
<ul class="simple">
<li><p>Port <strong>22000/TCP</strong> (or the actual listening port if you have changed
the <em>Sync Protocol Listen Address</em> setting.)</p></li>
<li><p>Port <strong>21027/UDP</strong> (for discovery broadcasts on IPv4 and multicasts on IPv6)</p></li>
</ul>
<section id="uncomplicated-firewall-ufw">
<h3>Uncomplicated Firewall (ufw)<a class="headerlink" href="#uncomplicated-firewall-ufw" title="Permalink to this headline">¶</a></h3>
<p>If you’re using <code class="docutils literal notranslate"><span class="pre">ufw</span></code> on Linux and have installed the <a class="reference external" href="https://apt.syncthing.net/">Syncthing package</a>, you can allow the necessary ports by running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">ufw</span> <span class="n">allow</span> <span class="n">syncthing</span>
</pre></div>
</div>
<p>If you also want to allow external access to the Syncthing web GUI, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">ufw</span> <span class="n">allow</span> <span class="n">syncthing</span><span class="o">-</span><span class="n">gui</span>
</pre></div>
</div>
<p>Allowing external access is <strong>not</strong>  necessary for a typical installation.</p>
<p>You can then verify that the ports mentioned above are allowed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">ufw</span> <span class="n">status</span> <span class="n">verbose</span>
</pre></div>
</div>
<p>In case you installed Syncthing manually you can follow the <a class="reference external" href="https://github.com/syncthing/syncthing/tree/master/etc/firewall-ufw">instructions to manually add the syncthing preset</a> to ufw.</p>
</section>
</section>
<section id="remote-web-gui">
<h2><span class="section-number">2.10.3. </span>Remote Web GUI<a class="headerlink" href="#remote-web-gui" title="Permalink to this headline">¶</a></h2>
<p>To be able to access the web GUI from other computers, you need to change the
<em>GUI Listen Address</em> setting from the default <code class="docutils literal notranslate"><span class="pre">127.0.0.1:8384</span></code> to
<code class="docutils literal notranslate"><span class="pre">0.0.0.0:8384</span></code>. You also need to open the port in your local firewall if you
have one.</p>
<section id="tunneling-via-ssh">
<h3>Tunneling via SSH<a class="headerlink" href="#tunneling-via-ssh" title="Permalink to this headline">¶</a></h3>
<p>If you have SSH access to the machine running Syncthing but would rather not
open the web GUI port to the outside world, you can access it through a SSH
tunnel instead. You can start a tunnel with a command like the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ssh</span> <span class="o">-</span><span class="n">L</span> <span class="mi">9999</span><span class="p">:</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8384</span> <span class="n">machine</span>
</pre></div>
</div>
<p>This will bind to your local port 9999 and forward all connections from there to
port 8384 on the target machine. This still works even if Syncthing is bound to
listen on localhost only.</p>
</section>
</section>
<section id="via-a-proxy">
<h2><span class="section-number">2.10.4. </span>Via a Proxy<a class="headerlink" href="#via-a-proxy" title="Permalink to this headline">¶</a></h2>
<p>Syncthing can use a SOCKS5 proxy for outbound connections. Please see <a class="reference internal" href="proxying.html#proxying"><span class="std std-ref">Using Proxies</span></a>.</p>
</section>
</section>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="relaying.html" class="btn btn-neutral float-right" title="2.11. Relaying" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="syncing.html" class="btn btn-neutral" title="2.9. Understanding Synchronization" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'v1',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/version_redirect.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>