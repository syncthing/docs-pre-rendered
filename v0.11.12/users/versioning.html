

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>File Versioning &mdash; Syncthing v0.11 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.png"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/syncthing.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Syncthing v0.11 documentation" href="../index.html"/>
        <link rel="next" title="Syncthing Development" href="../dev/intro.html"/>
        <link rel="prev" title="Security Principles" href="security.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="../index.html" class="icon icon-home"> Syncthing
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/getting-started.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro/getting-started.html#installing">Installing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../intro/getting-started.html#syncthing">Syncthing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../intro/getting-started.html#configuring">Configuring</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../intro/gui.html">An intro to the GUI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro/gui.html#folder-view">Folder View</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/gui.html#device-view">Device View</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../intro/project-presentation.html">Project Presentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro/project-presentation.html#syncthing">Syncthing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/project-presentation.html#syncthing-android">syncthing-android</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/project-presentation.html#syncthing-inotify">syncthing-inotify</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/project-presentation.html#syncthing-gtk">Syncthing-GTK</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For Users</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="syncthing.html">Command Line Operation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="syncthing.html#synopsis">Synopsis</a></li>
<li class="toctree-l2"><a class="reference internal" href="syncthing.html#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="syncthing.html#options">Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="syncthing.html#exit-codes">Exit Codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="syncthing.html#development-settings">Development Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="syncthing.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="config.html#synopsis">Synopsis</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html#config-file-format">Config File Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html#configuration-element">Configuration Element</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html#folder-element">Folder Element</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html#device-element">Device Element</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html#gui-element">GUI Element</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html#options-element">Options Element</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="faq.html#general">General</a><ul>
<li class="toctree-l3"><a class="reference internal" href="faq.html#what-is-syncthing">What is Syncthing?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#is-it-syncthing-syncthing-or-syncthing">Is it “syncthing”, “Syncthing” or “SyncThing”?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#how-does-syncthing-differ-from-bittorrent-sync">How does Syncthing differ from BitTorrent Sync?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#usage">Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="faq.html#what-things-are-synced">What things are synced?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#is-synchronization-fast">Is synchronization fast?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#should-i-keep-my-device-ids-secret">Should I keep my device IDs secret?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#what-if-there-is-a-conflict">What if there is a conflict?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#how-to-configure-multiple-users-on-a-single-machine">How to configure multiple users on a single machine?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#is-syncthing-my-ideal-backup-application">Is Syncthing my ideal backup application?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#why-is-there-no-ios-client">Why is there no iOS client?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#why-does-it-use-so-much-cpu">Why does it use so much CPU?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#how-can-i-exclude-files-with-brackets-in-the-name">How can I exclude files with brackets (<code class="docutils literal notranslate"><span class="pre">[]</span></code>) in the name?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#why-is-the-setup-more-complicated-than-btsync">Why is the setup more complicated than BTSync?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#how-do-i-access-the-web-gui-from-another-computer">How do I access the web GUI from another computer?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#why-do-i-see-syncthing-twice-in-task-manager">Why do I see Syncthing twice in task manager?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#where-do-syncthing-logs-go-to">Where do Syncthing logs go to?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#how-do-i-upgrade-syncthing">How do I upgrade Syncthing?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#where-do-i-find-the-latest-release">Where do I find the latest release?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="firewall.html">Firewall Setup</a><ul>
<li class="toctree-l2"><a class="reference internal" href="firewall.html#port-forwards">Port Forwards</a></li>
<li class="toctree-l2"><a class="reference internal" href="firewall.html#local-firewall">Local Firewall</a></li>
<li class="toctree-l2"><a class="reference internal" href="firewall.html#remote-web-gui">Remote Web GUI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="firewall.html#tunneling-via-ssh">Tunneling via SSH</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="autostart.html">Starting Syncthing Automatically</a><ul>
<li class="toctree-l2"><a class="reference internal" href="autostart.html#windows">Windows</a><ul>
<li class="toctree-l3"><a class="reference internal" href="autostart.html#third-party-tools">Third-party Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="autostart.html#start-on-login">Start on Login</a></li>
<li class="toctree-l3"><a class="reference internal" href="autostart.html#run-independent-of-user-login">Run independent of user login</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="autostart.html#mac-os-x">Mac OS X</a><ul>
<li class="toctree-l3"><a class="reference internal" href="autostart.html#using-homebrew">Using homebrew</a></li>
<li class="toctree-l3"><a class="reference internal" href="autostart.html#without-homebrew">Without homebrew</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="autostart.html#linux">Linux</a><ul>
<li class="toctree-l3"><a class="reference internal" href="autostart.html#ubuntu-like-systems">Ubuntu like systems</a></li>
<li class="toctree-l3"><a class="reference internal" href="autostart.html#supervisord">Supervisord</a></li>
<li class="toctree-l3"><a class="reference internal" href="autostart.html#systemd">systemd</a><ul>
<li class="toctree-l4"><a class="reference internal" href="autostart.html#how-to-use-the-system-instance">How to use the system instance</a></li>
<li class="toctree-l4"><a class="reference internal" href="autostart.html#how-to-use-the-user-instance">How to use the user instance</a></li>
<li class="toctree-l4"><a class="reference internal" href="autostart.html#using-the-journal">Using the journal</a></li>
<li class="toctree-l4"><a class="reference internal" href="autostart.html#debugging">Debugging</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contrib.html">Community Contributions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contrib.html#gui-wrappers">GUI Wrappers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="contrib.html#cross-platform">Cross-platform</a></li>
<li class="toctree-l3"><a class="reference internal" href="contrib.html#android">Android</a></li>
<li class="toctree-l3"><a class="reference internal" href="contrib.html#ubuntu">Ubuntu</a></li>
<li class="toctree-l3"><a class="reference internal" href="contrib.html#windows">Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="contrib.html#os-x">OS X</a></li>
<li class="toctree-l3"><a class="reference internal" href="contrib.html#kindle-touch">Kindle Touch</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="contrib.html#packages-and-bundlings">Packages and Bundlings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="contrib.html#archlinux">ArchLinux</a></li>
<li class="toctree-l3"><a class="reference internal" href="contrib.html#arkos">arkOS</a></li>
<li class="toctree-l3"><a class="reference internal" href="contrib.html#debian-ubuntu">Debian / Ubuntu</a></li>
<li class="toctree-l3"><a class="reference internal" href="contrib.html#docker">Docker</a></li>
<li class="toctree-l3"><a class="reference internal" href="contrib.html#fedora">Fedora</a></li>
<li class="toctree-l3"><a class="reference internal" href="contrib.html#gentoo">Gentoo</a></li>
<li class="toctree-l3"><a class="reference internal" href="contrib.html#freebsd">FreeBSD</a></li>
<li class="toctree-l3"><a class="reference internal" href="contrib.html#opensuse">OpenSUSE</a></li>
<li class="toctree-l3"><a class="reference internal" href="contrib.html#synology-nas">Synology NAS</a></li>
<li class="toctree-l3"><a class="reference internal" href="contrib.html#qnap-nas">QNAP NAS</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="contrib.html#integrations">Integrations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="contrib.html#rest-api-bindings">REST API Bindings</a></li>
<li class="toctree-l3"><a class="reference internal" href="contrib.html#ports">Ports</a></li>
<li class="toctree-l3"><a class="reference internal" href="contrib.html#configuration-management">Configuration management</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="foldermaster.html">Folder Master</a></li>
<li class="toctree-l1"><a class="reference internal" href="ignoring.html">Ignoring Files</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ignoring.html#synopsis">Synopsis</a></li>
<li class="toctree-l2"><a class="reference internal" href="ignoring.html#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="ignoring.html#patterns">Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="ignoring.html#example">Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="ignoring.html#effects-on-in-sync-status">Effects on “In Sync” Status</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reverseproxy.html">Reverse Proxy Setup</a><ul>
<li class="toctree-l2"><a class="reference internal" href="reverseproxy.html#server-configuration">Server Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reverseproxy.html#apache">Apache</a></li>
<li class="toctree-l3"><a class="reference internal" href="reverseproxy.html#nginx">Nginx</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reverseproxy.html#folder-configuration">Folder Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reverseproxy.html#id2">Apache</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security Principles</a><ul>
<li class="toctree-l2"><a class="reference internal" href="security.html#information-leakage">Information Leakage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="security.html#global-discovery">Global Discovery</a></li>
<li class="toctree-l3"><a class="reference internal" href="security.html#local-discovery">Local Discovery</a></li>
<li class="toctree-l3"><a class="reference internal" href="security.html#upgrade-checks">Upgrade Checks</a></li>
<li class="toctree-l3"><a class="reference internal" href="security.html#usage-reporting">Usage Reporting</a></li>
<li class="toctree-l3"><a class="reference internal" href="security.html#sync-connections-bep">Sync Connections (BEP)</a></li>
<li class="toctree-l3"><a class="reference internal" href="security.html#web-gui">Web GUI</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="security.html#in-short">In Short</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">File Versioning</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="#trash-can-file-versioning">Trash Can File Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="#simple-file-versioning">Simple File Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="#staggered-file-versioning">Staggered File Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="#external-file-versioning">External File Versioning</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#example-for-unixes">Example for Unixes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For Developers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dev/intro.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dev/intro.html#controlling-syncthing-from-external-applications">Controlling Syncthing from External Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/intro.html#contributing-to-the-syncthing-core">Contributing to the Syncthing Core</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../dev/intro.html#source-code-layout">Source Code Layout</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev/intro.html#why-are-you-being-so-hard-on-my-pull-request">Why are you being so hard on my pull request?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev/building.html">Building Syncthing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dev/building.html#branches-and-tags">Branches and Tags</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/building.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/building.html#building-unix">Building (Unix)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/building.html#building-windows">Building (Windows)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/building.html#subcommands-and-options">Subcommands and Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/building.html#building-without-git">Building without Git</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/building.html#building-with-docker">Building with Docker</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev/contributing.html">Contribution Guidelines</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dev/contributing.html#authorship">Authorship</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/contributing.html#coding-style">Coding Style</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../dev/contributing.html#general">General</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev/contributing.html#go-specific">Go Specific</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../dev/contributing.html#commits">Commits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/contributing.html#tests">Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/contributing.html#branches">Branches</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/contributing.html#tags">Tags</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/contributing.html#licensing">Licensing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev/debugging.html">Debugging Syncthing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dev/debugging.html#environment-variables">Environment Variables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../dev/debugging.html#sttrace">STTRACE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev/debugging.html#stprofiler">STPROFILER</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev/debugging.html#stguiassets">STGUIASSETS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev/debugging.html#stcpuprofile">STCPUPROFILE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev/debugging.html#stheapprofile">STHEAPPROFILE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev/debugging.html#stblockprofile">STBLOCKPROFILE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev/debugging.html#stperfstats">STPERFSTATS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev/debugging.html#stnoupgrade">STNOUPGRADE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev/debugging.html#gomaxprocs">GOMAXPROCS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev/debugging.html#gogc">GOGC</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev/device-ids.html">Understanding Device IDs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dev/device-ids.html#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/device-ids.html#keys">Keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/device-ids.html#id1">Device IDs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../dev/device-ids.html#connection-establishment">Connection Establishment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../dev/device-ids.html#an-aside-about-collisions">An Aside About Collisions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/device-ids.html#problems-and-vulnerabilities">Problems and Vulnerabilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../dev/device-ids.html#discovery-spoofing">Discovery Spoofing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev/device-ids.html#long-device-ids-are-painful">Long Device IDs are Painful</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev/events.html">Event API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dev/events.html#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/events.html#event-structure">Event Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/events.html#events">Events</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../events/configsaved.html">ConfigSaved</a></li>
<li class="toctree-l3"><a class="reference internal" href="../events/deviceconnected.html">DeviceConnected</a></li>
<li class="toctree-l3"><a class="reference internal" href="../events/devicedisconnected.html">DeviceDisconnected</a></li>
<li class="toctree-l3"><a class="reference internal" href="../events/devicediscovered.html">DeviceDiscovered</a></li>
<li class="toctree-l3"><a class="reference internal" href="../events/devicerejected.html">DeviceRejected</a></li>
<li class="toctree-l3"><a class="reference internal" href="../events/downloadprogress.html">DownloadProgress</a></li>
<li class="toctree-l3"><a class="reference internal" href="../events/foldercompletion.html">FolderCompletion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../events/foldererrors.html">FolderErrors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../events/folderrejected.html">FolderRejected</a></li>
<li class="toctree-l3"><a class="reference internal" href="../events/foldersummary.html">FolderSummary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../events/itemfinished.html">ItemFinished</a></li>
<li class="toctree-l3"><a class="reference internal" href="../events/itemstarted.html">ItemStarted</a></li>
<li class="toctree-l3"><a class="reference internal" href="../events/localindexupdated.html">LocalIndexUpdated</a></li>
<li class="toctree-l3"><a class="reference internal" href="../events/ping.html">Ping</a></li>
<li class="toctree-l3"><a class="reference internal" href="../events/remoteindexupdated.html">RemoteIndexUpdated</a></li>
<li class="toctree-l3"><a class="reference internal" href="../events/starting.html">Starting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../events/startupcomplete.html">StartupCompleted</a></li>
<li class="toctree-l3"><a class="reference internal" href="../events/statechanged.html">StateChanged</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev/issues.html">Issue Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dev/issues.html#labels">Labels</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/issues.html#milestone">Milestone</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/issues.html#assignee">Assignee</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/issues.html#locking">Locking</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev/jenkins.html">Interacting with Jenkins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/release.html">Creating a Release</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dev/release.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/release.html#process">Process</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev/release-schedule.html">Release Schedule</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dev/release-schedule.html#structure">Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/release-schedule.html#patch-releases">Patch Releases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/release-schedule.html#minor-releases">Minor Releases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/release-schedule.html#major-releases">Major Releases</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev/rest.html">REST API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dev/rest.html#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/rest.html#api-key">API Key</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/rest.html#system-endpoints">System Endpoints</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-config-get.html">GET /rest/system/config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-config-insync-get.html">GET /rest/system/config/insync</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-config-post.html">POST /rest/system/config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-connections-get.html">GET /rest/system/connections</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-discovery-get.html">GET /rest/system/discovery</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-discovery-hint-post.html">POST /rest/system/discovery/hint</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-error-clear-post.html">POST /rest/system/error/clear</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-error-get.html">GET /rest/system/error</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-error-post.html">POST /rest/system/error</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-ping-get.html">GET /rest/system/ping</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-ping-post.html">POST /rest/system/ping</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-reset-post.html">POST /rest/system/reset</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-restart-post.html">POST /rest/system/restart</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-shutdown-post.html">POST /rest/system/shutdown</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-status-get.html">GET /rest/system/status</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-upgrade-get.html">GET /rest/system/upgrade</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-upgrade-post.html">POST /rest/system/upgrade</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-version-get.html">GET /rest/system/version</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../dev/rest.html#database-endpoints">Database Endpoints</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../rest/db-browse-get.html">GET /rest/db/browse</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/db-completion-get.html">GET /rest/db/completion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/db-file-get.html">GET /rest/db/file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/db-ignores-get.html">GET /rest/db/ignores</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/db-ignores-post.html">POST /rest/db/ignores</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/db-need-get.html">GET /rest/db/need</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/db-prio-post.html">POST /rest/db/prio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/db-scan-post.html">POST /rest/db/scan</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/db-status-get.html">GET /rest/db/status</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../dev/rest.html#statistics-endpoints">Statistics Endpoints</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../rest/stats-device-get.html">GET /rest/stats/device</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/stats-folder-get.html">GET /rest/stats/folder</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../dev/rest.html#misc-services-endpoints">Misc Services Endpoints</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../rest/svc-deviceid-get.html">GET /rest/svc/deviceid</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/svc-lang-get.html">GET /rest/svc/lang</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/svc-report-get.html">GET /rest/svc/report</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Syncthing</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>File Versioning</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="https://github.com/syncthing/docs/blob/master/users/versioning.rst" class="fa fa-github"> Edit on GitHub</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <section id="file-versioning">
<h1>File Versioning<a class="headerlink" href="#file-versioning" title="Permalink to this headline">¶</a></h1>
<div class="admonition-todo admonition" id="id1">
<p class="admonition-title">Todo</p>
<p>External versioning needs example for Windows.</p>
</div>
<section id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Syncthing supports archiving the old version of a file when it is deleted or
replaced with a newer version from the cluster. This is called “file
versioning” and uses one of the available <em>versioning strategies</em> described
below. File versioning is configured per folder and defaults to “no file
versioning”, i.e. no old copies of files are kept.</p>
</section>
<section id="trash-can-file-versioning">
<h2>Trash Can File Versioning<a class="headerlink" href="#trash-can-file-versioning" title="Permalink to this headline">¶</a></h2>
<p>This versioning strategy emulates the common “trash can” approach. When a file
is deleted or replaced due to a change on a remote device, it is a moved to
the trash can in the <code class="docutils literal notranslate"><span class="pre">.stversions</span></code> folder. If a file with the same name was
already in the trash can it is replaced.</p>
<p>A configuration option is available to clean the trash can from files older
than a specified number of days. If this is set to a positive number of days,
files will be removed when they have been in the trash can that long. Setting
this to zero prevents any files from being removed from the trash can
automatically.</p>
</section>
<section id="simple-file-versioning">
<h2>Simple File Versioning<a class="headerlink" href="#simple-file-versioning" title="Permalink to this headline">¶</a></h2>
<p>With “Simple File Versioning” files are moved to the <code class="docutils literal notranslate"><span class="pre">.stversions</span></code> folder
(inside your shared folder) when replaced or deleted on a remote device. This
option also takes a value in an input titled “Keep Versions” which tells
Syncthing how many old versions of the file it should keep. For example, if
you set this value to 5, if a file is replaced 5 times on a remote device, you
will see 5 time-stamped versions on that file in the “.stversions” folder on
the other devices sharing the same folder.</p>
</section>
<section id="staggered-file-versioning">
<h2>Staggered File Versioning<a class="headerlink" href="#staggered-file-versioning" title="Permalink to this headline">¶</a></h2>
<p>With “Staggered File Versioning” files are also moved to a different folder
when replaced or deleted on a remote device (just like “Simple File
Versioning”), however, versions are automatically deleted if they are older
than the maximum age or exceed the number of files allowed in an interval.</p>
<p>With this versioning method it’s possible to specify where the versions are
stored, with the default being the <code class="docutils literal notranslate"><span class="pre">.stversions</span></code> folder inside the normal
folder path. If you set a custom version path, please ensure that it’s on the
same partition or filesystem as the regular folder path, as moving files there
may otherwise fail. You can use an absolute path (this is recommended) or a
relative path. Relative paths are interpreted relative to Syncthing’s current
or startup directory.</p>
<p>The following intervals are used and they each have a maximum number of files
that will be kept for each.</p>
<dl class="simple">
<dt>1 Hour</dt><dd><p>For the first hour, the most recent version is kept every 30 seconds.</p>
</dd>
<dt>1 Day</dt><dd><p>For the first day, the most recent version is kept every hour.</p>
</dd>
<dt>30 Days</dt><dd><p>For the first 30 days, the most recent version is kept every day.</p>
</dd>
<dt>Until Maximum Age</dt><dd><p>The maximum time to keep a version in days. For example, to keep replaced or
deleted files in the “.stversions” folder for an entire year, use 365. If
only or 10 days, use 10. <strong>Note: Set to 0 to keep versions forever.</strong></p>
</dd>
</dl>
</section>
<section id="external-file-versioning">
<h2>External File Versioning<a class="headerlink" href="#external-file-versioning" title="Permalink to this headline">¶</a></h2>
<p>This versioning method delegates the decision on what to do to an external
command (program or script). The only configuration option is the name of the
command. This should be an absolute path name. Just prior to a file being
replaced, the command will be run with two parameters: the path to the folder,
and the path to the file within the folder.</p>
<section id="example-for-unixes">
<h3>Example for Unixes<a class="headerlink" href="#example-for-unixes" title="Permalink to this headline">¶</a></h3>
<p>Lets say I want to keep the latest version of each file as they are replaced
or removed; essentially I want a “trash can”-like behavior. For this, I create
the following script and store it as <code class="docutils literal notranslate"><span class="pre">/Users/jb/bin/onlylatest.sh</span></code> (i.e. the
<code class="docutils literal notranslate"><span class="pre">bin</span></code> directory in my home directory):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/sh</span>
<span class="nb">set</span> -eu

<span class="c1"># Where I want my versions stored</span>
<span class="nv">versionspath</span><span class="o">=</span>~/.trashcan

<span class="c1"># The parameters we get from Syncthing</span>
<span class="nv">folderpath</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
<span class="nv">filepath</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span>

<span class="c1"># First ensure the dir where we need to store the file exists</span>
mkdir -p <span class="sb">`</span>dirname <span class="s2">&quot;</span><span class="nv">$versionspath</span><span class="s2">/</span><span class="nv">$filepath</span><span class="s2">&quot;</span><span class="sb">`</span>
<span class="c1"># Then move the file there</span>
mv -f <span class="s2">&quot;</span><span class="nv">$folderpath</span><span class="s2">/</span><span class="nv">$filepath</span><span class="s2">&quot;</span> <span class="s2">&quot;</span><span class="nv">$versionspath</span><span class="s2">/</span><span class="nv">$filepath</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>I must ensure that the script has execute permissions (<code class="docutils literal notranslate"><span class="pre">chmod</span> <span class="pre">755</span>
<span class="pre">onlylatest.sh</span></code>), then configure Syncthing with the above path as the command
name.</p>
<p>Lets assume I have a folder “default” in ~/Sync, and that within that folder
there is a file <code class="docutils literal notranslate"><span class="pre">docs/letter.txt</span></code> that is being replaced or deleted. The
script will be called as if I ran this from the command line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ /Users/jb/bin/onlylatest.sh /Users/jb/Sync docs/letter.txt
</pre></div>
</div>
<p>The script will then move the file in question to
<code class="docutils literal notranslate"><span class="pre">~/.trashcan/docs/letter.txt</span></code>, replacing any previous version of that letter
that may already have been there.</p>
</section>
</section>
</section>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../dev/intro.html" class="btn btn-neutral float-right" title="Syncthing Development" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="security.html" class="btn btn-neutral" title="Security Principles" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
      Last updated on Jan 30, 2022.
    </p>
  </div>

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'v0.11',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>